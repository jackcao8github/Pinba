<!DOCTYPE html>
<html manifest="../pinba.appcache">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width" />

<link rel="stylesheet" href="../css/jquery.mobile-1.4.5.css" />
<link rel="stylesheet" href="../mycss/photoswipe.css" />
<link rel="stylesheet" href="../css/font-awesome.css" />
<link rel="stylesheet" href="../mycss/mygrid.css" />
<script src="../js/jquery-1.11.3.js"></script>
<script src="../js/jquery.mobile-1.4.5.js"></script>
<script type="text/javascript" src="../myjs/mycommon.js"></script>
<script type="text/javascript" src="../myjs/myswipe.js"></script>
<script type="text/javascript">
	function swipeRight() {
		closeSubPage();
	}
	var resumeId = 0;
	var userId = 0;
	$(document).ready(function() {
		var mode = getQueryString('mode');
		if (mode=='intergration'){//表示此页面被嵌入到其它页面里,header和footer要去掉
			$('#header').remove();
			$('#footer').remove();
		}
		pageInit();
	});
	
	function pageInit(){
		resumeId = getQueryString('resumeId');
        if ( resumeId == null ) {
            alert('参数reusmeId为空!');
            return;
        }
        var resumeInfo = {};
        if (resumeId > 0) {
            resumeInfo.resumeId = resumeId;
        }
        var cachedUserInfo = str2Json(localStorage.userInfo);
        if (cachedUserInfo != null) {
            resumeInfo.userToken = cachedUserInfo.userToken;
            resumeInfo.readUserId = cachedUserInfo.userId;
            userId  = cachedUserInfo.userId;
        }else{
        	userId = 0;
        }
            ajaxReq('resumeAction', {
                method : 'getResumeInfo',
                resumeInfo : json2Str(resumeInfo)
            }, function(data) {
                if (data.flag == 'success') {
                    bindData(data);

                    //如果不是简历所有者，需要删除修改简历按钮
                    var resumeUserId = data.userId;
                    if (userId == resumeUserId) {
                        $('#footer').remove();
                    } else {
                        $('#modBtn').remove();
                    }
                } else {
                    alert(data.msg);
                    return false;
                }
            });
	}
	/* 修改简历 */
	function modResume() {
		changeSubPage('resume','workdetailPage','resumeId='+resumeId);
	}
	/* 增加关注 */
	function addFocus() {
		alert('建设中');
	}

	//绑定数据到控件
	function bindData(jsonData) {
		for ( var o in jsonData) {
			var ctrl = $('#' + o);
			if (ctrl.length > 0) {
				//处理下拉框采集的数据
				var realValue = jsonData[o];
				var displayValue = getDisplayEnumValue(o,realValue);
				if (displayValue==realValue){//没有显示值则用realValue显示
					ctrl.html(realValue);
				}else{
					ctrl.html(displayValue);
				}
			}
		}
	}
</script>


<style type="text/css">
li {
	padding: 0em 1em
}
</style>

</head>
<body>
	<div data-role="page" id="workdetailPage">
		<!-- <div data-role="header" data-position="fixed" data-fullscreen="false" data-tap-toggle="false"> -->
		<!-- 返回按钮 -->
		<div data-role="header" data-position="fixed" data-fullscreen="false"
			data-tap-toggle="false" id="header">
			<a href="#" data-rel="back"
				class="ui-btn ui-btn-left ui-alt-icon ui-nodisc-icon ui-corner-all ui-btn-icon-notext ui-icon-carat-l"
				onclick="closeSubPage();return false;">Back</a>
			<h1 id="resumeType">兼职简历</h1>

			<a onclick="modResume()" id="modBtn"
				class="ui-btn ui-corner-all ui-shadow ui-btn-icon-left ui-icon-edit">修改简历</a>
		</div>
		<ul data-role="listview">
			<li data-role="list-divider">基本信息</li>
			<li data-icon="false" style="padding: 0em 1em">
				<div style="overflow: hidden">
					<div style="float: left; width: 30%; color: #a3a3a3">
						<p>姓名:</p>
					</div>
					<div style="float: left; width: 70%">
						<p id="realName"></p>
					</div>
				</div>
				<div style="overflow: hidden">
					<div style="float: left; width: 30%; color: #a3a3a3">
						<p>性别:</p>
					</div>
					<div style="float: left; width: 70%">
						<p id="sex"></p>
					</div>
				</div>
				<div style="overflow: hidden">
                    <div style="float: left; width: 30%; color: #a3a3a3">
                        <p>年龄:</p>
                    </div>
                    <div style="float: left; width: 70%">
                        <p id="age"></p>
                    </div>
                </div>
				<div style="overflow: hidden">
					<div style="float: left; width: 30%; color: #a3a3a3">
						<p>工作经验:</p>
					</div>
					<div style="float: left; width: 70%">
						<p id="experience"></p>
					</div>
				</div>
				<div style="overflow: hidden">
					<div style="float: left; width: 30%; color: #a3a3a3">
						<p>学历:</p>
					</div>
					<div style="float: left; width: 70%">
						<p id="degree"></p>
					</div>
				</div>
				<div style="overflow: hidden">
					<div style="float: left; width: 30%; color: #a3a3a3">
						<p>期望区域:</p>
					</div>
					<div style="float: left; width: 70%">
						<p id="expectWorkArea"></p>
					</div>
				</div>
				
				<div style="overflow: hidden">
					<div style="float: left; width: 30%; color: #a3a3a3">
						<p>期望职位:</p>
					</div>
					<div style="float: left; width: 70%">
						<p id="expectPost"></p>
					</div>
				</div>
				<div style="overflow: hidden">
					<div style="float: left; width: 30%; color: #a3a3a3">
						<p>手机:</p>
					</div>
					<div style="float: left; width: 70%">
						<p id="cellphone"></p>
					</div>
				</div>
				<div style="overflow: hidden">
					<div style="float: left; width: 30%; color: #a3a3a3">
						<p>邮箱:</p>
					</div>
					<div style="float: left; width: 70%">
						<p id="email"></p>
					</div>
				</div>
			</li>
			<li data-role="list-divider">期望待遇</li>
			<li data-icon="false" style="padding: 0em 1em">
				<div style="overflow: hidden">
					<div style="float: left; width: 30%; color: #a3a3a3">
						<p>日薪:</p>
					</div>
					<div style="float: left; width: 70%">
						<p id="daySallary"></p>
					</div>
				</div>
				<div style="overflow: hidden">
					<div style="float: left; width: 30%; color: #a3a3a3">
						<p>工资当天结算:</p>
					</div>
					<div style="float: left; width: 70%">
						<p id="dayCharge"></p>
					</div>
				</div>
				<div style="overflow: hidden">
					<div style="float: left; width: 30%; color: #a3a3a3">
						<p>提供食宿:</p>
					</div>
					<div style="float: left; width: 70%">
						<p id="foodAndLodging"></p>
					</div>
				</div>
			</li>
			<li data-role="list-divider">工作经历</li>
			<li data-icon="false" style="padding: 0em 1em">
				<p>2015-1~2015-7 | xx公司</p>
				<p>所属行业：培训行业</p>
				<p>岗位：培训师</p>
				<p style="white-space: pre-line;">工作内容：xxxx</p>
			</li>
			<li data-icon="false" style="padding: 0em 1em">
				<p>2015-7~ | yy公司</p>
				<p>所属行业：培训行业</p>
				<p>岗位：培训师</p>
				<p style="white-space: pre-line;">工作内容：xxxx</p>
			</li>

			<li data-role="list-divider">教育经历</li>
			<li data-icon="false" style="padding: 0em 1em">
				<p>2015-1~2015-7 | xx学校</p>
				<p>所学专业：培训师</p>
				<p>学历：大学</p>
			</li>
			<li data-icon="false" style="padding: 0em 1em">
				<p>2015-1~2015-7 | xx学校</p>
				<p>所学专业：培训师</p>
				<p>学历：大学</p>
			</li>
			<li data-role="list-divider">自我评价</li>
			<li data-icon="false" style="padding: 0em 1em">
				<p style="white-space: pre-line;" id="selfReview"></p>
			</li>
		</ul>


		<div data-role="footer" data-position="fixed" data-fullscreen="false"
			data-tap-toggle="false" id="footer">
			<fieldset class="ui-grid-a">
				<div class="ui-block-a">
					<a id="focusBtn" style="width: 80%; text-align: left"
						onclick="addFocus()"
						class="ui-btn  ui-corner-all ui-btn-icon-left  ui-icon-heart" id="focusNumber"></a>
				</div>
				<div class="ui-block-b">
					<a id="contactBtn" style="width: 80%; text-align: left"
						class="ui-btn  ui-corner-all ui-btn-icon-left  ui-icon-phone" id="cellphone"></a>
				</div>
			</fieldset>
		</div>
	</div>
</body>
</html>