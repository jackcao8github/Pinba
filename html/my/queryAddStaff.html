<!DOCTYPE html>
<html manifest="../pinba.appcache">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1, user-scalable=no" />
<link rel="stylesheet" href="../css/jquery.mobile-1.4.5.min.css" />
<script src="../js/jquery-1.11.3.min.js"></script>
<script src="../js/jquery.mobile-1.4.5.min.js"></script>
</head>
<body>
	<div data-role="page" id="messagePage">
		<div data-role="header" data-position="fixed" data-fullscreen="false" data-tap-toggle="false">
			<!-- 返回按钮 -->
			<a href="#" data-rel="back"
				class="ui-btn ui-btn-left ui-alt-icon ui-nodisc-icon ui-corner-all ui-btn-icon-notext ui-icon-carat-l"
				onclick="closeSubPage();return false;">Back</a>

			<h1>增加员工</h1>
		</div>
		<div data-role="content">
			<div id="form">
				<div data-role="fieldcontain">
					<label for="cellphone">员工手机号:</label> <input type="text"
						name="cellphone" id="cellphone" value="" placeholder="通过员工手机号找到员工">
				</div>
				<div data-role="fieldcontain">
					<label for="workTimeBegin">开始工作时间:</label> <input type="date"
						name="workTimeBegin" id="workTimeBegin" value=""
						required placeholder="开始工作时间">
				</div>
				<div data-role="fieldcontain">
					<label for="workTimeEnd">结束工作时间:</label> <input type="date"
						name="workTimeEnd" id="workTimeEnd" value="" required
						placeholder="结束工作时间">
				</div>
				<div data-role="fieldcontain">
					<label for="workAddress">工作地点:</label> <input type="text"
						name="workAddress" id="workAddress" value="" required
						placeholder="工作地点">
				</div>

				<div data-role="fieldcontain">
					<label for="workRemark">备注:</label>
					<textarea cols="40" rows="8" name="workRemark" id="workRemark"
						data-mini="true" required placeholder="备注"></textarea>
				</div>

				<a data-role="button" class="submmitBtn" data-icon="check" onclick="hired()">提交</a>
			</div>
		</div>
	</div>
</body>


<script type="text/javascript" src="../myjs/myswipe.js"></script>
<script src="../myjs/mycommon.js"></script>


<script type="text/javascript">
var workId = 0;
$(document).ready(function() {
    workId = getQueryString('workId');
});
function swipeRight(){
	closeSubPage();
}
function hired(){
	//form表单校验不通过
    if(checkFormNullable('form')==false){
        return;
    }
	
	var hiredInfo = {};
    var cachedUserInfo = getLoginUserInfo();
    if (cachedUserInfo != null) {
    	hiredInfo.cellphone = $('#cellphone').val();
        hiredInfo.workId = workId;
        hiredInfo.workTimeBegin = $('#workTimeBegin').val();
        hiredInfo.workTimeEnd = $('#workTimeEnd').val();
        hiredInfo.workAddress = $('#workAddress').val();
        hiredInfo.workRemark = $('#workRemark').val();
        
        ajaxReq(
                'workAction',
                {
                    method : 'queryAddStaff',
                    hiredInfo : json2Str(hiredInfo)
                },
                function(data) {
                    if (data.flag != 'fail') {
                    	closeSubPage();
                    } else {
                        showTipDialog(data.msg);
                    }
                });
    }
}
</script>
</html>