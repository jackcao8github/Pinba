<!DOCTYPE html>
<html manifest="../pinba.appcache">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1, user-scalable=no" />
<link rel="stylesheet" href="../css/jquery.mobile-1.4.5.min.css" />
<link rel="stylesheet" href="../css/mobiscroll.custom-2.5.0.min.css" />
<script src="../js/jquery-1.11.3.min.js"></script>
<script src="../js/jquery.mobile-1.4.5.min.js"></script>
</head>
<body>
    <div id="regPage" data-role="page">
        <div data-role="header" id="header" data-position="fixed" data-fullscreen="false" data-tap-toggle="false">

            <a href="#" data-rel="back"
                class="ui-btn ui-btn-left ui-alt-icon ui-nodisc-icon ui-corner-all ui-btn-icon-notext ui-icon-carat-l"
                onclick="closeSubPage();return false;">Back</a>
            <h1>录用员工</h1>

        </div>
        <div data-role="content" class="ui-mini">
            <div id="form">
                <div data-role="fieldcontain">
                    <label for="workTimeBegin">开始工作时间:</label> <input type="text"
                        name="workTimeBegin" id="workTimeBegin" value=""
                        required placeholder="开始工作时间">
                </div>
                 <div data-role="fieldcontain">
                    <label for="workTimeEnd">结束工作时间:</label> <input type="text"
                        name="workTimeEnd" id="workTimeEnd" value=""
                        required placeholder="结束工作时间">
                </div>
                <div data-role="fieldcontain">
                    <label for="workAddress">工作地点:</label> <input type="text"
                        name="workAddress" id="workAddress" value=""
                        required placeholder="工作地点">
                </div>

                <div data-role="fieldcontain">
                    <label for="workRemark">备注:</label>
                    <textarea cols="40" rows="8" name="workRemark"
                        id="workRemark" data-mini="true"
                        placeholder="备注"></textarea>
                </div>

                <a data-role="button" class="submmitBtn" data-icon="check" onclick="bookInterview()">提交</a>
            </div>
        </div>
    </div>
</body>


<script type="text/javascript" src="../myjs/mycommon.js"></script>
<script type="text/javascript" src="../myjs/myswipe.js"></script>
<script src="../js/mobiscroll.js"></script>
<script type="text/javascript">
    var workId = 0;
    var resumeId = 0;
    $(document).ready(function() {
    	pageInit();
    	var newjavascript = {
				plugdatetime : function($dateTxt, type) {
					//			           var curr = new Date().getFullYear();
					var opt = {}
					opt.time = {
						preset : type
					};
					opt.date = {
						preset : type
					};
					opt.datetime = {
						preset : 'datetime',
						minDate : new Date(2010, 1, 01, 00, 00,00),
						maxDate : new Date(2020, 12, 31, 24, 59,59),
						stepMinute : 1
					};
					$dateTxt.val('').scroller('destroy').scroller(
							$.extend(opt[type], {
								mode : "scroller",
								display : "bottom",
								lang : "english",
								monthText : "月",
								dayText : "日",
								yearText : "年",
								hourText : "时",
								minuteText : "分",
								secText: "秒",
								setText : '确定',
								cancelText : '取消',
								dateFormat : 'yy-mm-dd',
								timeWheels: 'HHii',  timeFormat: 'HH:ii:ss'
							}));
				}
			}
			newjavascript.plugdatetime($("#workTimeBegin"), "datetime");
newjavascript.plugdatetime($("#workTimeEnd"), "datetime");
    });
    
    function pageInit(){
    	workId = getQueryString('workId');
        resumeId = getQueryString('resumeId');
    }
    function swipeRight() {
        closeSubPage();
    }

    function bookInterview() {
    	//form表单校验不通过
        if(checkFormNullable('form')==false){
            return;
        }
    	
        var hiredInfo = {};
        hiredInfo.workId = workId;
        hiredInfo.resumeId = resumeId;

        hiredInfo.workTimeBegin = $('#workTimeBegin').val();
        hiredInfo.workTimeEnd = $('#workTimeEnd').val();
        hiredInfo.workAddress = $('#workAddress').val();
        hiredInfo.workRemark = $('#workRemark').val();

        ajaxReq('workAction', {
            method : 'hiredStaff',
            hiredInfo : json2Str(hiredInfo)
        }, function(data) {
            if (data.flag == 'success') {
                closeSubPage();
            } else {
                showTipDialog(data.msg);
                return false;
            }
        });
        return false;
    }
</script>
</html>